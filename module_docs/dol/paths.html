<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>dol.paths &mdash; dol 0.2.48 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=fd3f3429" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=82a23e04"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/toggleprompt.js?v=d7ede5d2"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="dol.recipes" href="recipes.html" />
    <link rel="prev" title="dol.naming" href="naming.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            dol
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../dol.html">dol</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendable.html">dol.appendable</a></li>
<li class="toctree-l1"><a class="reference internal" href="base.html">dol.base</a></li>
<li class="toctree-l1"><a class="reference internal" href="caching.html">dol.caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="dig.html">dol.dig</a></li>
<li class="toctree-l1"><a class="reference internal" href="errors.html">dol.errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="explicit.html">dol.explicit</a></li>
<li class="toctree-l1"><a class="reference internal" href="filesys.html">dol.filesys</a></li>
<li class="toctree-l1"><a class="reference internal" href="kv_codecs.html">dol.kv_codecs</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc.html">dol.misc</a></li>
<li class="toctree-l1"><a class="reference internal" href="mixins.html">dol.mixins</a></li>
<li class="toctree-l1"><a class="reference internal" href="naming.html">dol.naming</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">dol.paths</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.KeyPath"><code class="docutils literal notranslate"><span class="pre">KeyPath</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.KeyTemplate"><code class="docutils literal notranslate"><span class="pre">KeyTemplate</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.dict_to_namedtuple"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.dict_to_namedtuple()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.dict_to_str"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.dict_to_str()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.dict_to_tuple"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.dict_to_tuple()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.filt_iter"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.filt_iter()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.key_codec"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.key_codec()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.match_str"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.match_str()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.namedtuple_to_dict"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.namedtuple_to_dict()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.simple_str_to_str"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.simple_str_to_str()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.simple_str_to_tuple"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.simple_str_to_tuple()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.single_to_str"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.single_to_str()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.str_to_dict"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.str_to_dict()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.str_to_namedtuple"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.str_to_namedtuple()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.str_to_simple_str"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.str_to_simple_str()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.str_to_single"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.str_to_single()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.str_to_tuple"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.str_to_tuple()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.tuple_to_dict"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.tuple_to_dict()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#dol.paths.KeyTemplate.tuple_to_str"><code class="docutils literal notranslate"><span class="pre">KeyTemplate.tuple_to_str()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.PathKeyTypes"><code class="docutils literal notranslate"><span class="pre">PathKeyTypes</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.PrefixRelativization"><code class="docutils literal notranslate"><span class="pre">PrefixRelativization</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.PrefixRelativizationMixin"><code class="docutils literal notranslate"><span class="pre">PrefixRelativizationMixin</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.add_prefix_filtering"><code class="docutils literal notranslate"><span class="pre">add_prefix_filtering()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.chain_of_getters"><code class="docutils literal notranslate"><span class="pre">chain_of_getters()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.get_attr_or_item"><code class="docutils literal notranslate"><span class="pre">get_attr_or_item()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.handle_prefixes"><code class="docutils literal notranslate"><span class="pre">handle_prefixes()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.mk_relative_path_store"><code class="docutils literal notranslate"><span class="pre">mk_relative_path_store()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.path_edit"><code class="docutils literal notranslate"><span class="pre">path_edit()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.path_filter"><code class="docutils literal notranslate"><span class="pre">path_filter()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.path_get"><code class="docutils literal notranslate"><span class="pre">path_get()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.path_set"><code class="docutils literal notranslate"><span class="pre">path_set()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.paths_getter"><code class="docutils literal notranslate"><span class="pre">paths_getter()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.rel_path_wrap"><code class="docutils literal notranslate"><span class="pre">rel_path_wrap()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.search_paths"><code class="docutils literal notranslate"><span class="pre">search_paths()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.str_template_key_trans"><code class="docutils literal notranslate"><span class="pre">str_template_key_trans()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dol.paths.string_unparse"><code class="docutils literal notranslate"><span class="pre">string_unparse()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">dol.recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap.html">dol.scrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/new_store_wrap.html">dol.scrap.new_store_wrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/store_factories.html">dol.scrap.store_factories</a></li>
<li class="toctree-l1"><a class="reference internal" href="signatures.html">dol.signatures</a></li>
<li class="toctree-l1"><a class="reference internal" href="sources.html">dol.sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/base_test.html">dol.tests.base_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/pickability_test.html">dol.tests.pickability_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/scrap.html">dol.tests.scrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_appendable.html">dol.tests.test_appendable</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_dol_tools.html">dol.tests.test_dol_tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_edge_cases.html">dol.tests.test_edge_cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_fanout_stores.html">dol.tests.test_fanout_stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_filesys.html">dol.tests.test_filesys</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_kv_codecs.html">dol.tests.test_kv_codecs</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_paths.html">dol.tests.test_paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/utils_for_tests.html">dol.tests.utils_for_tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">dol.tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="trans.html">dol.trans</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">dol.util</a></li>
<li class="toctree-l1"><a class="reference internal" href="zipfiledol.html">dol.zipfiledol</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">dol</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">dol.paths</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/module_docs/dol/paths.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-dol.paths">
<span id="dol-paths"></span><h1>dol.paths<a class="headerlink" href="#module-dol.paths" title="Link to this heading"></a></h1>
<p>Module for path (and path-like) object manipulation</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">path_filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
<span class="go">[(&#39;a&#39;, &#39;b&#39;, &#39;d&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_get</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">))</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_set</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">{&#39;a&#39;: {&#39;b&#39;: {&#39;c&#39;: 1, &#39;d&#39;: 4}, &#39;e&#39;: 3}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_set</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;new_ab_key&#39;</span><span class="p">),</span> <span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">{&#39;a&#39;: {&#39;b&#39;: {&#39;c&#39;: 1, &#39;d&#39;: 4, &#39;new_ab_key&#39;: 42}, &#39;e&#39;: 3}}</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="dol.paths.KeyPath">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">KeyPath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_sep:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_path_type:</span> <span class="pre">type</span> <span class="pre">|</span> <span class="pre">callable</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'tuple'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#KeyPath"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyPath" title="Link to this definition"></a></dt>
<dd><p>A key mapper that converts from an iterable key (default tuple) to a string
(given a path-separator str)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_sep</strong> – The path separator (used to make string paths from iterable paths and
visa versa</p></li>
<li><p><strong>_path_type</strong> – The type of the outcoming (inner) path. But really, any function to</p></li>
<li><p><strong>to</strong> (<em>convert from a list</em>) – the outer path type we want.</p></li>
</ul>
</dd>
</dl>
<p>With <code class="docutils literal notranslate"><span class="pre">'/'</span></code> as a separator:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span> <span class="o">=</span> <span class="n">KeyPath</span><span class="p">(</span><span class="n">path_sep</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">_key_of_id</span><span class="p">((</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">))</span>
<span class="go">&#39;a/b/c&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">_id_of_key</span><span class="p">(</span><span class="s1">&#39;a/b/c&#39;</span><span class="p">)</span>
<span class="go">(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">'.'</span></code> as a separator:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span> <span class="o">=</span> <span class="n">KeyPath</span><span class="p">(</span><span class="n">path_sep</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">_key_of_id</span><span class="p">((</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">))</span>
<span class="go">&#39;a.b.c&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">_id_of_key</span><span class="p">(</span><span class="s1">&#39;a.b.c&#39;</span><span class="p">)</span>
<span class="go">(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span> <span class="o">=</span> <span class="n">KeyPath</span><span class="p">(</span><span class="n">path_sep</span><span class="o">=</span><span class="s1">&#39;:::&#39;</span><span class="p">,</span> <span class="n">_path_type</span><span class="o">=</span><span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_id</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_id</span>
<span class="go">{&#39;a&#39;: None, &#39;b&#39;: None, &#39;c&#39;: None}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">_key_of_id</span><span class="p">(</span><span class="n">_id</span><span class="p">)</span>
<span class="go">&#39;a:::b:::c&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">_id_of_key</span><span class="p">(</span><span class="s1">&#39;a:::b:::c&#39;</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: None, &#39;b&#39;: None, &#39;c&#39;: None}</span>
</pre></div>
</div>
<p>Calling a <code class="docutils literal notranslate"><span class="pre">KeyPath</span></code> instance on a store wraps it so we can have path access to
it.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="s1">&#39;b&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">]</span>
<span class="go">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Now let&#39;s wrap the store</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">KeyPath</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)(</span><span class="n">s</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;a.b.c&#39;</span><span class="p">]</span>
<span class="go">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;a.b.c&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.14</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;a.b.c&#39;</span><span class="p">]</span>
<span class="go">3.14</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">s</span><span class="p">[</span><span class="s1">&#39;a.b.c&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">{&#39;a&#39;: {&#39;b&#39;: {}}}</span>
</pre></div>
</div>
<p>Note: <code class="docutils literal notranslate"><span class="pre">KeyPath</span></code> enables you to read with paths when all the keys of the paths
are valid (i.e. have a value), but just as with a <code class="docutils literal notranslate"><span class="pre">dict</span></code>, it will not create
intermediate nested values for you (as for example, you could make for yourself
using  <code class="docutils literal notranslate"><span class="pre">collections.defaultdict</span></code>).</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">KeyTemplate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">template:</span> <span class="pre">str,</span> <span class="pre">*,</span> <span class="pre">field_patterns:</span> <span class="pre">dict</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">to_str_funcs:</span> <span class="pre">dict</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">from_str_funcs:</span> <span class="pre">dict</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">simple_str_sep:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">',',</span> <span class="pre">namedtuple_type_name:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'NamedTuple',</span> <span class="pre">dflt_pattern:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'.*',</span> <span class="pre">dflt_field_name:</span> <span class="pre">~typing.Callable[[str],</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">&lt;built-in</span> <span class="pre">method</span> <span class="pre">format</span> <span class="pre">of</span> <span class="pre">str</span> <span class="pre">object&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate" title="Link to this definition"></a></dt>
<dd><p>A class for parsing and generating keys based on a template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> – A template string with fields to be extracted or filled in.</p></li>
<li><p><strong>field_patterns</strong> – A dictionary of field names and their regex patterns.</p></li>
<li><p><strong>simple_str_sep</strong> – A separator string for simple strings (i.e. strings without
fields).</p></li>
<li><p><strong>namedtuple_type_name</strong> – The name of the namedtuple type to use for namedtuple
fields.</p></li>
<li><p><strong>dflt_pattern</strong> – The default pattern to use for fields that don’t have a pattern
specified.</p></li>
<li><p><strong>to_str_funcs</strong> – A dictionary of field names and their functions to convert them
to strings.</p></li>
<li><p><strong>from_str_funcs</strong> – A dictionary of field names and their functions to convert
them from strings.</p></li>
</ul>
</dd>
</dl>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{name}</span><span class="s1">/v_</span><span class="si">{version}</span><span class="s1">.json&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">field_patterns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="sa">r</span><span class="s1">&#39;\d+&#39;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>And now you have a template that can be used to convert between various
representations of the template: You can extract fields from strings, generate
strings from fields, etc.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">str_to_dict</span><span class="p">(</span><span class="s2">&quot;root/dol/v_9.json&quot;</span><span class="p">)</span>
<span class="go">{&#39;name&#39;: &#39;dol&#39;, &#39;version&#39;: 9}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">dict_to_str</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;meshed&#39;</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">})</span>
<span class="go">&#39;root/meshed/v_42.json&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">dict_to_tuple</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;meshed&#39;</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">})</span>
<span class="go">(&#39;meshed&#39;, 42)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">tuple_to_dict</span><span class="p">((</span><span class="s1">&#39;i2&#39;</span><span class="p">,</span> <span class="mi">96</span><span class="p">))</span>
<span class="go">{&#39;name&#39;: &#39;i2&#39;, &#39;version&#39;: 96}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">str_to_tuple</span><span class="p">(</span><span class="s2">&quot;root/dol/v_9.json&quot;</span><span class="p">)</span>
<span class="go">(&#39;dol&#39;, 9)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">tuple_to_str</span><span class="p">((</span><span class="s1">&#39;front&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
<span class="go">&#39;root/front/v_11.json&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">str_to_namedtuple</span><span class="p">(</span><span class="s2">&quot;root/dol/v_9.json&quot;</span><span class="p">)</span>
<span class="go">NamedTuple(name=&#39;dol&#39;, version=9)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">str_to_simple_str</span><span class="p">(</span><span class="s2">&quot;root/dol/v_9.json&quot;</span><span class="p">)</span>
<span class="go">&#39;dol,9&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st_clone</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">simple_str_sep</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st_clone</span><span class="o">.</span><span class="n">str_to_simple_str</span><span class="p">(</span><span class="s2">&quot;root/dol/v_9.json&quot;</span><span class="p">)</span>
<span class="go">&#39;dol/9&#39;</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">st.key_codec</span></code>, you can make a <code class="docutils literal notranslate"><span class="pre">KeyCodec</span></code> for the given source (decoded)
and target (encoded) types.
A <cite>key_codec</cite> is a codec; it has an encoder and a decoder.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">key_codec</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">key_codec</span><span class="p">(</span><span class="s1">&#39;tuple&#39;</span><span class="p">,</span> <span class="s1">&#39;str&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encoder</span><span class="p">,</span> <span class="n">decoder</span> <span class="o">=</span> <span class="n">key_codec</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decoder</span><span class="p">(</span><span class="s1">&#39;root/dol/v_9.json&#39;</span><span class="p">)</span>
<span class="go">(&#39;dol&#39;, 9)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encoder</span><span class="p">((</span><span class="s1">&#39;dol&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
<span class="go">&#39;root/dol/v_9.json&#39;</span>
</pre></div>
</div>
<p>If you have a <code class="docutils literal notranslate"><span class="pre">Mapping</span></code>, you can use <code class="docutils literal notranslate"><span class="pre">key_codec</span></code> as a decorator to wrap
the mapping with a key mappings.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">store</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;root/meshed/v_151.json&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;downloads&quot;: 41, &quot;type&quot;: &quot;productivity&quot;}&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;root/dol/v_9.json&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;downloads&quot;: 132, &quot;type&quot;: &quot;utility&quot;}&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">accessor</span> <span class="o">=</span> <span class="n">key_codec</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">accessor</span><span class="p">)</span>
<span class="go">[(&#39;meshed&#39;, 151), (&#39;dol&#39;, 9)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">accessor</span><span class="p">[</span><span class="s1">&#39;i2&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;{&quot;downloads&quot;: 274, &quot;type&quot;: &quot;utility&quot;}&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
<span class="go">[&#39;root/meshed/v_151.json&#39;, &#39;root/dol/v_9.json&#39;, &#39;root/i2/v_4.json&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">store</span><span class="p">[</span><span class="s1">&#39;root/i2/v_4.json&#39;</span><span class="p">]</span>
<span class="go">&#39;{&quot;downloads&quot;: 274, &quot;type&quot;: &quot;utility&quot;}&#39;</span>
</pre></div>
</div>
<p>Note: If your store contains keys that don’t fit the format, key_codec will
raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>. To remedy this, you can use the <code class="docutils literal notranslate"><span class="pre">st.filt_iter</span></code> to
filter out keys that don’t fit the format, before you wrap the store with
<code class="docutils literal notranslate"><span class="pre">st.key_codec</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">store</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;root/meshed/v_151.json&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;downloads&quot;: 41, &quot;type&quot;: &quot;productivity&quot;}&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;root/dol/v_9.json&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;downloads&quot;: 132, &quot;type&quot;: &quot;utility&quot;}&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;root/not/the/right/format&#39;</span><span class="p">:</span> <span class="s2">&quot;something else&quot;</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">accessor</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">filt_iter</span><span class="p">(</span><span class="s1">&#39;str&#39;</span><span class="p">)(</span><span class="n">store</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">accessor</span><span class="p">)</span>
<span class="go">[&#39;root/meshed/v_151.json&#39;, &#39;root/dol/v_9.json&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">accessor</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">key_codec</span><span class="p">(</span><span class="s1">&#39;tuple&#39;</span><span class="p">,</span> <span class="s1">&#39;str&#39;</span><span class="p">)(</span><span class="n">st</span><span class="o">.</span><span class="n">filt_iter</span><span class="p">(</span><span class="s1">&#39;str&#39;</span><span class="p">)(</span><span class="n">store</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">accessor</span><span class="p">)</span>
<span class="go">[(&#39;meshed&#39;, 151), (&#39;dol&#39;, 9)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">accessor</span><span class="p">[</span><span class="s1">&#39;dol&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="go">&#39;{&quot;downloads&quot;: 132, &quot;type&quot;: &quot;utility&quot;}&#39;</span>
</pre></div>
</div>
<p>You can also ask any (handled) combination of field types:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">key_codec</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">key_codec</span><span class="p">(</span><span class="s1">&#39;tuple&#39;</span><span class="p">,</span> <span class="s1">&#39;dict&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key_codec</span><span class="o">.</span><span class="n">encoder</span><span class="p">((</span><span class="s1">&#39;i2&#39;</span><span class="p">,</span> <span class="mi">96</span><span class="p">))</span>
<span class="go">{&#39;name&#39;: &#39;i2&#39;, &#39;version&#39;: 96}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key_codec</span><span class="o">.</span><span class="n">decoder</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;fantastic&#39;</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
<span class="go">(&#39;fantastic&#39;, 4)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.dict_to_namedtuple">
<span class="sig-name descname"><span class="pre">dict_to_namedtuple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.dict_to_namedtuple"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.dict_to_namedtuple" title="Link to this definition"></a></dt>
<dd><p>Generates a namedtuple from the dictionary values based on the template.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{}</span><span class="s1">/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span> <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">App</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">dict_to_namedtuple</span><span class="p">({</span><span class="s1">&#39;i01_&#39;</span><span class="p">:</span> <span class="s1">&#39;life&#39;</span><span class="p">,</span> <span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">App</span>
<span class="go">NamedTuple(i01_=&#39;life&#39;, ver=42)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.dict_to_str">
<span class="sig-name descname"><span class="pre">dict_to_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.dict_to_str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.dict_to_str" title="Link to this definition"></a></dt>
<dd><p>Generates a string from the dictionary values based on the template.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{}</span><span class="s1">/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span> <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">dict_to_str</span><span class="p">({</span><span class="s1">&#39;i01_&#39;</span><span class="p">:</span> <span class="s1">&#39;life&#39;</span><span class="p">,</span> <span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">})</span>
<span class="go">&#39;root/life/v_042.json&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.dict_to_tuple">
<span class="sig-name descname"><span class="pre">dict_to_tuple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.dict_to_tuple"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.dict_to_tuple" title="Link to this definition"></a></dt>
<dd><p>Generates a tuple from the dictionary values based on the template.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{}</span><span class="s1">/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span> <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">str_to_tuple</span><span class="p">(</span><span class="s1">&#39;root/life/v_42.json&#39;</span><span class="p">)</span>
<span class="go">(&#39;life&#39;, 42)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.filt_iter">
<span class="sig-name descname"><span class="pre">filt_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'str'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'dict'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'tuple'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'namedtuple'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'simple_str'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'single'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'str'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.filt_iter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.filt_iter" title="Link to this definition"></a></dt>
<dd><p>Makes a store decorator that filters out keys that don’t match the template
given field type.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">store</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;root/meshed/v_151.json&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;downloads&quot;: 41, &quot;type&quot;: &quot;productivity&quot;}&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;root/dol/v_9.json&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;downloads&quot;: 132, &quot;type&quot;: &quot;utility&quot;}&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;root/not/the/right/format&#39;</span><span class="p">:</span> <span class="s2">&quot;something else&quot;</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filt</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span><span class="s1">&#39;root/</span><span class="si">{pkg}</span><span class="s1">/v_</span><span class="si">{version}</span><span class="s1">.json&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filtered_store</span> <span class="o">=</span> <span class="n">filt</span><span class="o">.</span><span class="n">filt_iter</span><span class="p">(</span><span class="s1">&#39;str&#39;</span><span class="p">)(</span><span class="n">store</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">filtered_store</span><span class="p">)</span>
<span class="go">[&#39;root/meshed/v_151.json&#39;, &#39;root/dol/v_9.json&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.key_codec">
<span class="sig-name descname"><span class="pre">key_codec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">decoded</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'str'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'dict'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'tuple'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'namedtuple'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'simple_str'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'single'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'tuple'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoded</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'str'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'dict'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'tuple'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'namedtuple'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'simple_str'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'single'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'str'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.key_codec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.key_codec" title="Link to this definition"></a></dt>
<dd><p>Makes a <code class="docutils literal notranslate"><span class="pre">KeyCodec</span></code> for the given source and target types.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{name}</span><span class="s1">/v_</span><span class="si">{version}</span><span class="s1">.json&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">field_patterns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="sa">r</span><span class="s1">&#39;\d+&#39;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>A <cite>key_codec</cite> is a codec; it has an encoder and a decoder.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">key_codec</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">key_codec</span><span class="p">(</span><span class="s1">&#39;tuple&#39;</span><span class="p">,</span> <span class="s1">&#39;str&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encoder</span><span class="p">,</span> <span class="n">decoder</span> <span class="o">=</span> <span class="n">key_codec</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decoder</span><span class="p">(</span><span class="s1">&#39;root/dol/v_9.json&#39;</span><span class="p">)</span>
<span class="go">(&#39;dol&#39;, 9)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encoder</span><span class="p">((</span><span class="s1">&#39;dol&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
<span class="go">&#39;root/dol/v_9.json&#39;</span>
</pre></div>
</div>
<p>If you have a <code class="docutils literal notranslate"><span class="pre">Mapping</span></code>, you can use <code class="docutils literal notranslate"><span class="pre">key_codec</span></code> as a decorator to wrap
the mapping with a key mappings.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">store</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;root/meshed/v_151.json&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;downloads&quot;: 41, &quot;type&quot;: &quot;productivity&quot;}&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;root/dol/v_9.json&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;downloads&quot;: 132, &quot;type&quot;: &quot;utility&quot;}&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">accessor</span> <span class="o">=</span> <span class="n">key_codec</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">accessor</span><span class="p">)</span>
<span class="go">[(&#39;meshed&#39;, 151), (&#39;dol&#39;, 9)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">accessor</span><span class="p">[</span><span class="s1">&#39;i2&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;{&quot;downloads&quot;: 274, &quot;type&quot;: &quot;utility&quot;}&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
<span class="go">[&#39;root/meshed/v_151.json&#39;, &#39;root/dol/v_9.json&#39;, &#39;root/i2/v_4.json&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">store</span><span class="p">[</span><span class="s1">&#39;root/i2/v_4.json&#39;</span><span class="p">]</span>
<span class="go">&#39;{&quot;downloads&quot;: 274, &quot;type&quot;: &quot;utility&quot;}&#39;</span>
</pre></div>
</div>
<p>Note: If your store contains keys that don’t fit the format, key_codec will
raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>. To remedy this, you can use the <code class="docutils literal notranslate"><span class="pre">st.filt_iter</span></code> to
filter out keys that don’t fit the format, before you wrap the store with
<code class="docutils literal notranslate"><span class="pre">st.key_codec</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.match_str">
<span class="sig-name descname"><span class="pre">match_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.match_str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.match_str" title="Link to this definition"></a></dt>
<dd><p>Returns True iff the string matches the template.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{}</span><span class="s1">/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span> <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">match_str</span><span class="p">(</span><span class="s1">&#39;root/life/v_042.json&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">match_str</span><span class="p">(</span><span class="s1">&#39;this/does/not_match&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.namedtuple_to_dict">
<span class="sig-name descname"><span class="pre">namedtuple_to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.namedtuple_to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.namedtuple_to_dict" title="Link to this definition"></a></dt>
<dd><p>Converts a namedtuple to a dictionary.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{}</span><span class="s1">/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span> <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">App</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">dict_to_namedtuple</span><span class="p">({</span><span class="s1">&#39;i01_&#39;</span><span class="p">:</span> <span class="s1">&#39;life&#39;</span><span class="p">,</span> <span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">namedtuple_to_dict</span><span class="p">(</span><span class="n">App</span><span class="p">)</span>
<span class="go">{&#39;i01_&#39;: &#39;life&#39;, &#39;ver&#39;: 42}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.simple_str_to_str">
<span class="sig-name descname"><span class="pre">simple_str_to_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ss</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.simple_str_to_str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.simple_str_to_str" title="Link to this definition"></a></dt>
<dd><p>Converts a simple character-delimited string to a string.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{}</span><span class="s1">/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span> <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span>    <span class="n">simple_str_sep</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">simple_str_to_str</span><span class="p">(</span><span class="s1">&#39;life-042&#39;</span><span class="p">)</span>
<span class="go">&#39;root/life/v_042.json&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.simple_str_to_tuple">
<span class="sig-name descname"><span class="pre">simple_str_to_tuple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ss</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.simple_str_to_tuple"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.simple_str_to_tuple" title="Link to this definition"></a></dt>
<dd><p>Converts a simple character-delimited string to a dict.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{}</span><span class="s1">/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span> <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span>    <span class="n">simple_str_sep</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">simple_str_to_tuple</span><span class="p">(</span><span class="s1">&#39;life-042&#39;</span><span class="p">)</span>
<span class="go">(&#39;life&#39;, 42)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.single_to_str">
<span class="sig-name descname"><span class="pre">single_to_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.single_to_str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.single_to_str" title="Link to this definition"></a></dt>
<dd><p>Generates a string from the single value based on the template.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/life/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span> <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">single_to_str</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="go">&#39;root/life/v_042.json&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.str_to_dict">
<span class="sig-name descname"><span class="pre">str_to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.str_to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.str_to_dict" title="Link to this definition"></a></dt>
<dd><p>Parses the input string and returns a dictionary of extracted values.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{}</span><span class="s1">/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">str_to_dict</span><span class="p">(</span><span class="s1">&#39;root/life/v_30.json&#39;</span><span class="p">)</span>
<span class="go">{&#39;i01_&#39;: &#39;life&#39;, &#39;ver&#39;: 30}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.str_to_namedtuple">
<span class="sig-name descname"><span class="pre">str_to_namedtuple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.str_to_namedtuple"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.str_to_namedtuple" title="Link to this definition"></a></dt>
<dd><p>Converts a string to a namedtuple.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{}</span><span class="s1">/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span> <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">App</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">str_to_namedtuple</span><span class="p">(</span><span class="s1">&#39;root/life/v_042.json&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">App</span>
<span class="go">NamedTuple(i01_=&#39;life&#39;, ver=42)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.str_to_simple_str">
<span class="sig-name descname"><span class="pre">str_to_simple_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.str_to_simple_str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.str_to_simple_str" title="Link to this definition"></a></dt>
<dd><p>Converts a string to a simple string (i.e. a simple character-delimited string).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{}</span><span class="s1">/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span> <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">str_to_simple_str</span><span class="p">(</span><span class="s1">&#39;root/life/v_042.json&#39;</span><span class="p">)</span>
<span class="go">&#39;life,042&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st_clone</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">simple_str_sep</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st_clone</span><span class="o">.</span><span class="n">str_to_simple_str</span><span class="p">(</span><span class="s1">&#39;root/life/v_042.json&#39;</span><span class="p">)</span>
<span class="go">&#39;life-042&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.str_to_single">
<span class="sig-name descname"><span class="pre">str_to_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.str_to_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.str_to_single" title="Link to this definition"></a></dt>
<dd><p>Parses the input string and returns a single value.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/life/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span> <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">str_to_single</span><span class="p">(</span><span class="s1">&#39;root/life/v_42.json&#39;</span><span class="p">)</span>
<span class="go">42</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.str_to_tuple">
<span class="sig-name descname"><span class="pre">str_to_tuple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.str_to_tuple"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.str_to_tuple" title="Link to this definition"></a></dt>
<dd><p>Parses the input string and returns a tuple of extracted values.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{}</span><span class="s1">/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span> <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">str_to_tuple</span><span class="p">(</span><span class="s1">&#39;root/life/v_42.json&#39;</span><span class="p">)</span>
<span class="go">(&#39;life&#39;, 42)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.tuple_to_dict">
<span class="sig-name descname"><span class="pre">tuple_to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param_vals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.tuple_to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.tuple_to_dict" title="Link to this definition"></a></dt>
<dd><p>Generates a dictionary from the tuple values based on the template.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{}</span><span class="s1">/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span> <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">tuple_to_dict</span><span class="p">((</span><span class="s1">&#39;life&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">))</span>
<span class="go">{&#39;i01_&#39;: &#39;life&#39;, &#39;ver&#39;: 42}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dol.paths.KeyTemplate.tuple_to_str">
<span class="sig-name descname"><span class="pre">tuple_to_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param_vals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/dol/paths.html#KeyTemplate.tuple_to_str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.KeyTemplate.tuple_to_str" title="Link to this definition"></a></dt>
<dd><p>Generates a string from the tuple values based on the template.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">KeyTemplate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;root/</span><span class="si">{}</span><span class="s1">/v_{ver:03.0f:\d+}.json&#39;</span><span class="p">,</span> <span class="n">from_str_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ver&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">tuple_to_str</span><span class="p">((</span><span class="s1">&#39;life&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">))</span>
<span class="go">&#39;root/life/v_042.json&#39;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dol.paths.PathKeyTypes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">PathKeyTypes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#PathKeyTypes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.PathKeyTypes" title="Link to this definition"></a></dt>
<dd><p>An enumeration.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dol.paths.PrefixRelativization">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">PrefixRelativization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#PrefixRelativization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.PrefixRelativization" title="Link to this definition"></a></dt>
<dd><p>A key wrap that allows one to interface with absolute paths through relative paths.
The original intent was for local files. Instead of referencing files through an absolute path such as:</p>
<blockquote>
<div><p><em>/A/VERY/LONG/ROOT/FOLDER/the/file/we.want</em></p>
</div></blockquote>
<p>we can instead reference the file as:</p>
<blockquote>
<div><p><em>the/file/we.want</em></p>
</div></blockquote>
<p>But PrefixRelativization can be used, not only for local paths, but when ever a string reference is involved.
In fact, not only strings, but any key object that has a __len__, __add__, and subscripting.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dol.paths.PrefixRelativizationMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">PrefixRelativizationMixin</span></span><a class="reference internal" href="../../_modules/dol/paths.html#PrefixRelativizationMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.PrefixRelativizationMixin" title="Link to this definition"></a></dt>
<dd><p>Mixin that adds a intercepts the _id_of_key an _key_of_id methods, transforming absolute keys to relative ones.
Designed to work with string keys, where absolute and relative are relative to a _prefix attribute
(assumed to exist).
The cannonical use case is when keys are absolute file paths, but we want to identify data through relative paths.
Instead of referencing files through an absolute path such as</p>
<blockquote>
<div><p>/A/VERY/LONG/ROOT/FOLDER/the/file/we.want</p>
</div></blockquote>
<dl class="simple">
<dt>we can instead reference the file as</dt><dd><p>the/file/we.want</p>
</dd>
</dl>
<p>Note though, that PrefixRelativizationMixin can be used, not only for local paths,
but when ever a string reference is involved.
In fact, not only strings, but any key object that has a __len__, __add__, and subscripting.</p>
<p>When subclassed, should be placed before the class defining _id_of_key an _key_of_id.
Also, assumes that a (string) _prefix attribute will be available.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dol.base</span> <span class="kn">import</span> <span class="n">Store</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">UserDict</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyStore</span><span class="p">(</span><span class="n">PrefixRelativizationMixin</span><span class="p">,</span> <span class="n">Store</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">store</span><span class="p">,</span> <span class="n">_prefix</span><span class="o">=</span><span class="s1">&#39;/root/of/data/&#39;</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span> <span class="o">=</span> <span class="n">_prefix</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">MyStore</span><span class="p">(</span><span class="n">store</span><span class="o">=</span><span class="nb">dict</span><span class="p">())</span>  <span class="c1"># using a dict as our store</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">s</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;bar&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;too&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;much&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;too&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Everything looks normal, but are the actual keys behind the hood?</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">_id_of_key</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="go">&#39;/root/of/data/foo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># see when iterating over s.items(), we get the interface view:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;foo&#39;, &#39;bar&#39;), (&#39;too&#39;, &#39;much&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># but if we ask the store we&#39;re actually delegating the storing to, we see what the keys actually are.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="go">dict_items([(&#39;/root/of/data/foo&#39;, &#39;bar&#39;), (&#39;/root/of/data/too&#39;, &#39;much&#39;)])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dol.paths.add_prefix_filtering">
<span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">add_prefix_filtering</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relativize_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__module__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__name__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__qualname__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__doc__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__annotations__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__defaults__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__kwdefaults__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#add_prefix_filtering"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.add_prefix_filtering" title="Link to this definition"></a></dt>
<dd><p>Add prefix filtering to a store.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a/b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a/c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;d/e&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">add_prefix_filtering</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">s</span><span class="p">[</span><span class="s1">&#39;a/&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;a/b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a/c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</pre></div>
</div>
<p>Demo usage on a <cite>Mapping</cite> type:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">UserDict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="n">add_prefix_filtering</span><span class="p">(</span><span class="n">UserDict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">D</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">s</span><span class="p">[</span><span class="s1">&#39;a/&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;a/b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a/c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dol.paths.chain_of_getters">
<span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">chain_of_getters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">getters:</span> <span class="pre">~typing.Iterable[~typing.Callable],</span> <span class="pre">obj=None,</span> <span class="pre">k=None,</span> <span class="pre">*,</span> <span class="pre">caught_errors=(&lt;class</span> <span class="pre">'Exception'&gt;,)</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#chain_of_getters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.chain_of_getters" title="Link to this definition"></a></dt>
<dd><p>If <code class="docutils literal notranslate"><span class="pre">k</span></code> is a string, tries to get <code class="docutils literal notranslate"><span class="pre">k</span></code> as an attribute of <code class="docutils literal notranslate"><span class="pre">obj</span></code> first,
and if that fails, gets it as <code class="docutils literal notranslate"><span class="pre">obj[k]</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dol.paths.get_attr_or_item">
<span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">get_attr_or_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#get_attr_or_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.get_attr_or_item" title="Link to this definition"></a></dt>
<dd><p>If <code class="docutils literal notranslate"><span class="pre">k</span></code> is a string, tries to get <code class="docutils literal notranslate"><span class="pre">k</span></code> as an attribute of <code class="docutils literal notranslate"><span class="pre">obj</span></code> first,
and if that fails, gets it as <code class="docutils literal notranslate"><span class="pre">obj[k]</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dol.paths.handle_prefixes">
<span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">handle_prefixes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relativize_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__module__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__name__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__qualname__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__doc__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__annotations__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__defaults__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__kwdefaults__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#handle_prefixes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.handle_prefixes" title="Link to this definition"></a></dt>
<dd><p>A store decorator that handles prefixes.</p>
<p>If aggregates several prefix-related functionalities. It will (by default)</p>
<ul class="simple">
<li><p>Filter the store so that only the keys starting with given prefix are accessible.</p></li>
<li><p>Relativize the keys (provide a view where the prefix is removed from the keys)</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>store</strong> – The store to wrap</p></li>
<li><p><strong>prefix</strong> – The prefix to use. If None and the store is an instance (not type),
will take the longest common prefix as the prefix.</p></li>
<li><p><strong>filter_prefix</strong> – Whether to filter out keys that don’t start with the prefix</p></li>
<li><p><strong>relativize_prefix</strong> – Whether to relativize the prefix</p></li>
<li><p><strong>default_prefix</strong> – The default prefix to use if no prefix is given and the store
is a type (not instance)</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;/ROOT/of/every/thing&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span> <span class="s1">&#39;/ROOT/of/this/too&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span> <span class="o">=</span> <span class="n">handle_prefixes</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;/ROOT/of/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">dd</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>  <span class="c1"># gives us what you would expect</span>
<span class="go">{&#39;every/thing&#39;: 42, &#39;this/too&#39;: 0, &#39;foo&#39;: &#39;bar&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">dd</span><span class="o">.</span><span class="n">store</span><span class="p">)</span>  <span class="c1"># but see where the underlying store actually wrote &#39;bar&#39;:</span>
<span class="go">{&#39;/ROOT/of/every/thing&#39;: 42, &#39;/ROOT/of/this/too&#39;: 0, &#39;/ROOT/of/foo&#39;: &#39;bar&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dol.paths.mk_relative_path_store">
<span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">mk_relative_path_store</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">store_cls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_key_validation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix_attr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'_prefix'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__module__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__name__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__qualname__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__doc__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__annotations__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__defaults__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__kwdefaults__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#mk_relative_path_store"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.mk_relative_path_store" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>store_cls</strong> – The base store to wrap (subclass)</p></li>
<li><p><strong>name</strong> – The name of the new store (by default ‘RelPath’ + store_cls.__name__)</p></li>
<li><p><strong>with_key_validation</strong> – Whether keys should be validated upon access (store_cls must have an is_valid_key method</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Returns: A new class that uses relative paths (i.e. where _prefix is automatically added to incoming keys,</dt><dd><p>and the len(_prefix) first characters are removed from outgoing keys.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># The dynamic way (if you try this at home, be aware of the pitfalls of the dynamic way</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># -- but don&#39;t just believe the static dogmas).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MyStore</span> <span class="o">=</span> <span class="n">mk_relative_path_store</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>  <span class="c1"># wrap our favorite store: A dict.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">MyStore</span><span class="p">()</span>  <span class="c1"># make such a store</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">_prefix</span> <span class="o">=</span> <span class="s1">&#39;/ROOT/&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>  <span class="c1"># gives us what you would expect</span>
<span class="go">{&#39;foo&#39;: &#39;bar&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span> <span class="c1"># but under the hood, the dict we wrapped actually contains the &#39;/ROOT/&#39; prefix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">store</span><span class="p">)</span>
<span class="go">{&#39;/ROOT/foo&#39;: &#39;bar&#39;}</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The static way: Make a class that will integrate the _prefix at construction time.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyStore</span><span class="p">(</span><span class="n">mk_relative_path_store</span><span class="p">(</span><span class="nb">dict</span><span class="p">)):</span>  <span class="c1"># Indeed, mk_relative_path_store(dict) is a class you can subclass</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_prefix</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span> <span class="o">=</span> <span class="n">_prefix</span>
</pre></div>
</div>
<p>You can choose the name you want that prefix to have as an attribute (we’ll still make
a hidden ‘_prefix’ attribute for internal use, but at least you can have an attribute with the
name you want.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MyRelStore</span> <span class="o">=</span> <span class="n">mk_relative_path_store</span><span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="n">prefix_attr</span><span class="o">=</span><span class="s1">&#39;rootdir&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">MyRelStore</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">rootdir</span> <span class="o">=</span> <span class="s1">&#39;/ROOT/&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>  <span class="c1"># gives us what you would expect</span>
<span class="go">{&#39;foo&#39;: &#39;bar&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span> <span class="c1"># but under the hood, the dict we wrapped actually contains the &#39;/ROOT/&#39; prefix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">store</span><span class="p">)</span>
<span class="go">{&#39;/ROOT/foo&#39;: &#39;bar&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dol.paths.path_edit">
<span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">path_edit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">VT</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">VT</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Mapping</span></span></span><a class="reference internal" href="../../_modules/dol/paths.html#path_edit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.path_edit" title="Link to this definition"></a></dt>
<dd><p>Make a series of (in place) edits to a Mapping, specifying <cite>(path, value)</cite> pairs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> (<em>Mapping</em>) – The mapping to edit.</p></li>
<li><p><strong>edits</strong> – An iterable of <code class="docutils literal notranslate"><span class="pre">(path,</span> <span class="pre">value)</span></code> tuples, or <code class="docutils literal notranslate"><span class="pre">path:</span> <span class="pre">value</span></code> Mapping.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The edited mapping.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Mapping</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_edit</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="p">[([</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;d.e.f&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
<span class="go">{&#39;a&#39;: 1, &#39;b&#39;: {&#39;c&#39;: 2}, &#39;d&#39;: {&#39;e&#39;: {&#39;f&#39;: 3}}}</span>
</pre></div>
</div>
<p>Changes happened also inplace (so if you don’t want that, make a deepcopy first):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">{&#39;a&#39;: 1, &#39;b&#39;: {&#39;c&#39;: 2}, &#39;d&#39;: {&#39;e&#39;: {&#39;f&#39;: 3}}}</span>
</pre></div>
</div>
<p>You can also pass a dict of edits.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">path_edit</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;d.e.f&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>
<span class="go">{&#39;a&#39;: 4, &#39;b&#39;: {&#39;c&#39;: 2}, &#39;d&#39;: {&#39;e&#39;: {&#39;f&#39;: 5}}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dol.paths.path_filter">
<span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">path_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pkv_filt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">PT</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">KT</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">VT</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leafs_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">breadth_first</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">PT</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/dol/paths.html#path_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.path_filter" title="Link to this definition"></a></dt>
<dd><p>Walk a dict, yielding paths to values that pass the <code class="docutils literal notranslate"><span class="pre">pkv_filt</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pkv_filt</strong> – A function that takes a path, key, and value, and returns
<code class="docutils literal notranslate"><span class="pre">True</span></code> if the path should be yielded, and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise</p></li>
<li><p><strong>d</strong> – The <code class="docutils literal notranslate"><span class="pre">Mapping</span></code> to walk (scan through)</p></li>
<li><p><strong>leafs_only</strong> – Whether to yield only paths to leafs (default), or to yield
paths to all values that pass the <code class="docutils literal notranslate"><span class="pre">pkv_filt</span></code>.</p></li>
<li><p><strong>breadth_first</strong> – Whether to perform breadth-first traversal
(instead of the default depth-first traversal).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An iterator of paths to values that pass the <code class="docutils literal notranslate"><span class="pre">pkv_filt</span></code></p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">path_filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
</pre></div>
</div>
<p>[(‘a’, ‘b’, ‘d’)]</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mm</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">}},</span>
<span class="gp">... </span>    <span class="s1">&#39;aa&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;bb&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;cc&#39;</span><span class="p">:</span> <span class="s1">&#39;meaning of life&#39;</span><span class="p">}},</span>
<span class="gp">... </span>    <span class="s1">&#39;aaa&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;bbb&#39;</span><span class="p">:</span> <span class="mi">314</span><span class="p">},</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">return_path_if_int_leaf</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">paths</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">path_filter</span><span class="p">(</span><span class="n">return_path_if_int_leaf</span><span class="p">,</span> <span class="n">mm</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">paths</span>  <span class="c1"># only the paths to the int leaves are returned</span>
<span class="go">[(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;), (&#39;aaa&#39;, &#39;bbb&#39;)]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pkv_filt</span></code> argument can use path, key, and/or value to define your search
query. For example, let’s extract all the paths that have depth at least 3.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">paths</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">path_filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">mm</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">paths</span>
<span class="go">[(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;), (&#39;aa&#39;, &#39;bb&#39;, &#39;cc&#39;)]</span>
</pre></div>
</div>
<p>The rationale for <code class="docutils literal notranslate"><span class="pre">path_filter</span></code> yielding matching paths, and not values or keys,
is that if you have the paths, you can than get the keys and values with them,
using <code class="docutils literal notranslate"><span class="pre">path_get</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span><span class="p">,</span> <span class="n">reduce</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_get</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">m</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">m</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="n">m</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">extract_paths</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">m</span><span class="p">,</span> <span class="n">paths</span><span class="p">:</span> <span class="nb">map</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="n">path_get</span><span class="p">,</span> <span class="n">m</span><span class="p">),</span> <span class="n">paths</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vals</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">extract_paths</span><span class="p">(</span><span class="n">mm</span><span class="p">,</span> <span class="n">paths</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vals</span>
<span class="go">[42, &#39;meaning of life&#39;]</span>
</pre></div>
</div>
<p>Note: pkv_filt is first to match the order of the arguments of the
builtin filter function.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dol.paths.path_get">
<span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">path_get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">obj:</span> <span class="pre">~typing.Any,</span> <span class="pre">path,</span> <span class="pre">on_error:</span> <span class="pre">~typing.Callable[[dict],</span> <span class="pre">~typing.Any]</span> <span class="pre">|</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">raise_on_error&gt;,</span> <span class="pre">*,</span> <span class="pre">sep='.',</span> <span class="pre">key_transformer=None,</span> <span class="pre">get_value:</span> <span class="pre">~typing.Callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">get_attr_or_item&gt;,</span> <span class="pre">caught_errors=(&lt;class</span> <span class="pre">'Exception'&gt;,)</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#path_get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.path_get" title="Link to this definition"></a></dt>
<dd><p>Get elements of a mapping through a path to be called recursively.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The object to get the path from</p></li>
<li><p><strong>path</strong> – The path to get</p></li>
<li><p><strong>on_error</strong> – The error handler to use (default: raise_on_error)</p></li>
<li><p><strong>sep</strong> – The separator to use if the path is a string</p></li>
<li><p><strong>key_transformer</strong> – A function to transform the keys of the path</p></li>
<li><p><strong>get_value</strong> – A function to get the value of a key in a mapping</p></li>
<li><p><strong>caught_errors</strong> – The errors to catch (default: Exception)</p></li>
</ul>
</dd>
</dl>
<p>It will</p>
<ul class="simple">
<li><p>split a path into keys if it is a string, using the specified seperator <code class="docutils literal notranslate"><span class="pre">sep</span></code></p></li>
<li><p>consider string keys that are numeric as ints (convenient for lists)</p></li>
<li><p>get items also as attributes (attributes are checked for first for string keys)</p></li>
<li><p>catch all exceptions (that are subclasses of <code class="docutils literal notranslate"><span class="pre">Exception</span></code>)</p></li>
</ul>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
<span class="gp">... </span>     <span class="n">an_attribute</span> <span class="o">=</span> <span class="mi">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_get</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">A</span><span class="p">}],</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;an_attribute&#39;</span><span class="p">])</span>
<span class="go">42</span>
</pre></div>
</div>
<p>By default, if <code class="docutils literal notranslate"><span class="pre">path</span></code> is a string, it will be split on <code class="docutils literal notranslate"><span class="pre">sep</span></code>,
which is <code class="docutils literal notranslate"><span class="pre">'.'</span></code> by default.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">path_get</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">A</span><span class="p">}],</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;1.2.a.an_attribute&#39;</span><span class="p">)</span>
<span class="go">42</span>
</pre></div>
</div>
<p>Note: The underlying function is <code class="docutils literal notranslate"><span class="pre">_path_get</span></code>, but <cite>path_get</cite> has defaults and
flexible input processing for more convenience.</p>
<p>Note: <code class="docutils literal notranslate"><span class="pre">path_get</span></code> contains some ready-made <code class="docutils literal notranslate"><span class="pre">OnErrorType</span></code> functions in its
attributes. For example, see how we can make <code class="docutils literal notranslate"><span class="pre">path_get</span></code> have the same behavior
as <code class="docutils literal notranslate"><span class="pre">dict.get</span></code> by passing <code class="docutils literal notranslate"><span class="pre">path_get.return_none_on_error</span></code> as <code class="docutils literal notranslate"><span class="pre">on_error</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span> <span class="o">=</span> <span class="n">path_get</span><span class="p">({},</span> <span class="s1">&#39;no.keys&#39;</span><span class="p">,</span> <span class="n">on_error</span><span class="o">=</span><span class="n">path_get</span><span class="o">.</span><span class="n">return_none_on_error</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
</pre></div>
</div>
<p>For example, <code class="docutils literal notranslate"><span class="pre">path_get.raise_on_error</span></code>,
<code class="docutils literal notranslate"><span class="pre">path_get.return_none_on_error</span></code>, and <code class="docutils literal notranslate"><span class="pre">path_get.return_empty_tuple_on_error</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dol.paths.path_set">
<span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">path_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d:</span> <span class="pre">~typing.Mapping</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_path:</span> <span class="pre">~typing.Iterable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val:</span> <span class="pre">VT</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_mapping:</span> <span class="pre">~typing.Callable[[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">VT]</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'dict'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#path_set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.path_set" title="Link to this definition"></a></dt>
<dd><p>Sets a val to a path of keys.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> – The mapping to set the value in</p></li>
<li><p><strong>key_path</strong> – The path of keys to set the value to</p></li>
<li><p><strong>val</strong> – The value to set</p></li>
<li><p><strong>sep</strong> – The separator to use if the path is a string</p></li>
<li><p><strong>new_mapping</strong> – callable that returns a new mapping to use when key is not found</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_set</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">],</span> <span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">{&#39;a&#39;: 1, &#39;b&#39;: {&#39;c&#39;: 2, &#39;e&#39;: 42}}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>  <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;val of a.c&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>  <span class="p">},</span>
<span class="gp">... </span>  <span class="s2">&quot;10&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="gp">... </span>  <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>      <span class="s2">&quot;AA&quot;</span><span class="p">:</span> <span class="mi">3</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span>  <span class="p">}</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_set</span><span class="p">(</span><span class="n">input_dict</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;new&#39;</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">),</span> <span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span>  
<span class="go">{&#39;a&#39;: {&#39;c&#39;: &#39;val of a.c&#39;, &#39;b&#39;: 1}, &#39;10&#39;: 10, &#39;b&#39;: {&#39;B&#39;: {&#39;AA&#39;: 3}},</span>
<span class="go">&#39;new&#39;: {&#39;key&#39;: {&#39;path&#39;: 7}}}</span>
</pre></div>
</div>
<p>You can also use a string as a path, with a separator:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">path_set</span><span class="p">(</span><span class="n">input_dict</span><span class="p">,</span> <span class="s1">&#39;new/key/old/path&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span>  
<span class="go">{&#39;a&#39;: {&#39;c&#39;: &#39;val of a.c&#39;, &#39;b&#39;: 1}, &#39;10&#39;: 10, &#39;b&#39;: {&#39;B&#39;: {&#39;AA&#39;: 3}},</span>
<span class="go">&#39;new&#39;: {&#39;key&#39;: {&#39;path&#39;: 7, &#39;old&#39;: {&#39;path&#39;: 8}}}}</span>
</pre></div>
</div>
<p>If you specify a string path and a non-None separator, the separator will be used
to split the string into a list of keys. The default separator is <code class="docutils literal notranslate"><span class="pre">sep='.'</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">path_set</span><span class="p">(</span><span class="n">input_dict</span><span class="p">,</span> <span class="s1">&#39;new.key&#39;</span><span class="p">,</span> <span class="s1">&#39;new val&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span>  
<span class="go">{&#39;a&#39;: {&#39;c&#39;: &#39;val of a.c&#39;, &#39;b&#39;: 1}, &#39;10&#39;: 10, &#39;b&#39;: {&#39;B&#39;: {&#39;AA&#39;: 3}},</span>
<span class="go">&#39;new&#39;: {&#39;key&#39;: &#39;new val&#39;}}</span>
</pre></div>
</div>
<p>You can also specify a different <code class="docutils literal notranslate"><span class="pre">new_mapping</span></code> factory, which will be used to
create new mappings when a key is missing. The default is <code class="docutils literal notranslate"><span class="pre">dict</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_set</span><span class="p">(</span><span class="n">input_dict</span><span class="p">,</span> <span class="s1">&#39;new.key&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="n">new_mapping</span><span class="o">=</span><span class="n">OrderedDict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span>  
<span class="go">{&#39;new&#39;: OrderedDict([(&#39;key&#39;, 42)])}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dol.paths.paths_getter">
<span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">paths_getter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">paths,</span> <span class="pre">obj=None,</span> <span class="pre">*,</span> <span class="pre">egress=&lt;class</span> <span class="pre">'dict'&gt;,</span> <span class="pre">on_error:</span> <span class="pre">~typing.Callable[[dict],</span> <span class="pre">~typing.Any]</span> <span class="pre">|</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">raise_on_error&gt;,</span> <span class="pre">sep='.',</span> <span class="pre">key_transformer=None,</span> <span class="pre">get_value:</span> <span class="pre">~typing.Callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">get_attr_or_item&gt;,</span> <span class="pre">caught_errors=(&lt;class</span> <span class="pre">'Exception'&gt;,)</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#paths_getter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.paths_getter" title="Link to this definition"></a></dt>
<dd><p>Returns (path, values) pairs of the given paths in the given object.
This is the “fan-out” version of <code class="docutils literal notranslate"><span class="pre">path_get</span></code>, specifically designed to
get multiple paths, returning the (path, value) pairs in a dict (by default),
or via any pairs aggregator (<code class="docutils literal notranslate"><span class="pre">egress</span></code>) function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>paths</strong> – The paths to get</p></li>
<li><p><strong>obj</strong> – The object to get the paths from</p></li>
<li><p><strong>egress</strong> – The egress function to use (default: dict)</p></li>
<li><p><strong>on_error</strong> – The error handler to use (default: raise_on_error)</p></li>
<li><p><strong>sep</strong> – The separator to use if the path is a string</p></li>
<li><p><strong>key_transformer</strong> – A function to transform the keys of the path</p></li>
<li><p><strong>get_value</strong> – A function to get the value of a key in a mapping</p></li>
<li><p><strong>caught_errors</strong> – The errors to catch (default: Exception)</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">paths</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a.c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">paths_getter</span><span class="p">(</span><span class="n">paths</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">)</span>
<span class="go">{&#39;a.c&#39;: 2, &#39;d&#39;: 3}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_extractor</span> <span class="o">=</span> <span class="n">paths_getter</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_extractor</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="go">{&#39;a.c&#39;: 2, &#39;d&#39;: 3}</span>
</pre></div>
</div>
<p>See that the paths are used as the keys of the returned dict.
If you want to specify your own keys, you can simply specify <cite>paths</cite> as a dict
whose keys are the keys you want, and whose values are the paths to get:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">path_extractor_2</span> <span class="o">=</span> <span class="n">paths_getter</span><span class="p">({</span><span class="s1">&#39;california&#39;</span><span class="p">:</span> <span class="s1">&#39;a.c&#39;</span><span class="p">,</span> <span class="s1">&#39;dreaming&#39;</span><span class="p">:</span> <span class="s1">&#39;d&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_extractor_2</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="go">{&#39;california&#39;: 2, &#39;dreaming&#39;: 3}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dol.paths.rel_path_wrap">
<span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">rel_path_wrap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_prefix</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#rel_path_wrap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.rel_path_wrap" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>o</strong> – An object to be wrapped</p></li>
<li><p><strong>_prefix</strong> – The _prefix to use for key wrapping (will remove it from outcoming keys and add to ingoing keys.</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># The dynamic way (if you try this at home, be aware of the pitfalls of the dynamic way</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># -- but don&#39;t just believe the static dogmas).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;/ROOT/of/every/thing&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span> <span class="s1">&#39;/ROOT/of/this/too&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span> <span class="o">=</span> <span class="n">rel_path_wrap</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s1">&#39;/ROOT/of/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">dd</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>  <span class="c1"># gives us what you would expect</span>
<span class="go">{&#39;every/thing&#39;: 42, &#39;this/too&#39;: 0, &#39;foo&#39;: &#39;bar&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span> <span class="c1"># but under the hood, the dict we wrapped actually contains the &#39;/ROOT/&#39; prefix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">dd</span><span class="o">.</span><span class="n">store</span><span class="p">)</span>
<span class="go">{&#39;/ROOT/of/every/thing&#39;: 42, &#39;/ROOT/of/this/too&#39;: 0, &#39;/ROOT/of/foo&#39;: &#39;bar&#39;}</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The static way: Make a class that will integrate the _prefix at construction time.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyStore</span><span class="p">(</span><span class="n">mk_relative_path_store</span><span class="p">(</span><span class="nb">dict</span><span class="p">)):</span>  <span class="c1"># Indeed, mk_relative_path_store(dict) is a class you can subclass</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_prefix</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span> <span class="o">=</span> <span class="n">_prefix</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dol.paths.search_paths">
<span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">search_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pkv_filt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">PT</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">KT</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">VT</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leafs_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">breadth_first</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">PT</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/dol/paths.html#search_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.search_paths" title="Link to this definition"></a></dt>
<dd><p>backwards compatibility quasi-alias (arguments are flipped)
Use path_filter instead, since search_paths will be deprecated.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dol.paths.str_template_key_trans">
<span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">str_template_key_trans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#dol.paths.PathKeyTypes" title="dol.paths.PathKeyTypes"><span class="pre">PathKeyTypes</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">process_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">process_info_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">named_tuple_type_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'NamedTuple'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'/'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#str_template_key_trans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.str_template_key_trans" title="Link to this definition"></a></dt>
<dd><p>Make a key trans object that translates from a string _id to a dict, tuple, or namedtuple key (and back)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dol.paths.string_unparse">
<span class="sig-prename descclassname"><span class="pre">dol.paths.</span></span><span class="sig-name descname"><span class="pre">string_unparse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parsing_result</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dol/paths.html#string_unparse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dol.paths.string_unparse" title="Link to this definition"></a></dt>
<dd><p>The inverse of string.Formatter.parse</p>
<p>Will ravel</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formatter</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">Formatter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">string_unparse</span><span class="p">(</span><span class="n">formatter</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;literal{name!c:spec}&#39;</span><span class="p">))</span>
<span class="go">&#39;literal{name!c:spec}&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="naming.html" class="btn btn-neutral float-left" title="dol.naming" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="recipes.html" class="btn btn-neutral float-right" title="dol.recipes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright NO COPYRIGHT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>